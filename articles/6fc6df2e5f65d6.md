---
title: "Next.jsæ‰€ä½œ"
emoji: "ğŸ—’"
type: "tech"
topics: [nextjs, chakraui, storybook, eslint, jest]
published: false
---

æ›¸ãå§‹ã‚ã‚‹ãŸã³ã«åŒã˜ã“ã¨ã‚’èª¿ã¹ã¦ã„ã‚‹æ°—ãŒã™ã‚‹ã®ã§ã¾ã¨ã‚ã€‚

# ä½¿ã†æŠ€è¡“

- Next.js
- Chakra UI

# Next.js ã§æœ€åˆã«ã‚„ã‚‹ã“ã¨

## ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹

[Create Next App](https://nextjs.org/docs/api-reference/create-next-app)

```sh
npx create-next-app@latest --ts --use-npm
```

## ã„ã‚‰ãªã„ã‚³ãƒ¼ãƒ‰ã‚’æ¶ˆã™

```sh
rm -rf public/ styles/ pages/api/
mkdir src/
mv pages/ src/
```

```ts:src/pages/_app.tsx
import type { AppProps } from "next/app";

function MyApp({ Component, pageProps }: AppProps) {
  return <Component {...pageProps} />;
}

export default MyApp;
```

```ts:src/pages/index.tsx
import type { NextPage } from "next";

const Home: NextPage = () => {
  return <>Home</>;
};

export default Home;
```

# linter ã¨ formatter ã®è¨­å®š

## prettier ã‚’è¿½åŠ 

[prettier](https://www.npmjs.com/package/prettier)
[next lint å‘¨ã‚Š](https://nextjs.org/docs/basic-features/eslint)

```sh
npm i -D prettier eslint-config-prettier
```

```diff json:.eslintrc.json
{
- "extends": "next/core-web-vitals"
+ "extends": [
+   "next/core-web-vitals",
+   "prettier"
+ ]
}
```

```diff json:package.json
{
  "scripts": {
    ...
+   "check-types": "tsc --noEmit",
+   "lint": "next lint --dir src",
+   "lint:fix": "next lint --fix --dir src",
+   "format": "prettier --write --ignore-path .gitignore 'src/**/*.{ts,tsx,json}'"
  }
}
```

## pre-commit ã®è¨­å®š

[husky](https://www.npmjs.com/package/husky)
[lint-staged](https://github.com/okonet/lint-staged)

```sh
npm i -D husky lint-staged
npm set-script prepare "husky install"
npm run prepare
npx husky add .husky/pre-commit "npm run lint-staged"
```

```js:.lintstagedrc.js
const path = require("path");

const buildEslintCommand = (filenames) =>
  `next lint --fix --file ${filenames
    .map((f) => path.relative(process.cwd(), f))
    .join(" --file ")}`;

const buildPrettierCommand = (filenames) =>
  `prettier --write ${filenames
    .map((f) => path.relative(process.cwd(), f))
    .join(" ")}`;

const typeCheck = () => `tsc --noEmit`;

module.exports = {
  "*.{ts,tsx}": [buildPrettierCommand],
  "*.{js,jsx,ts,tsx}": [buildEslintCommand, typeCheck],
};
```
